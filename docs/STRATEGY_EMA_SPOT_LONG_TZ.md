üìù –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –ó–ê–î–ê–ù–ò–ï (–¢–ó): –°–ü–û–¢-–°–¢–†–ê–¢–ï–ì–ò–Ø –ù–ê EMA –° –ê–ù–ê–õ–ò–ó–û–ú –ó–ê–ö–û–ù–û–ú–ï–†–ù–û–°–¢–ï–ô

0. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –°–∏—Å—Ç–µ–º—ã
- **–°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö**: –∞–¥–∞–ø—Ç–µ—Ä—ã –∫ REST/WebSocket API Binance, MEXC, BingX —Å–æ–±–∏—Ä–∞—é—Ç —Å–≤–µ—á–∏ –ø–æ —Å–∏–º–≤–æ–ª–∞–º (BTC/USDT, ETH/USDT –∏ –≤–æ–ª–∞—Ç–∏–ª—å–Ω—ã–µ –∞–ª—å—Ç–∫–æ–∏–Ω—ã). –ë–∞–∑–æ–≤—ã–π —Ç–∞–π–º—Ñ—Ä–µ–π–º ‚Äî 5m; –∏–∑ –Ω–µ–≥–æ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –∞–≥—Ä–µ–≥–∞—Ç—ã 1H, 4H –∏ 1D. –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `raw_store` (Parquet/S3 –∏–ª–∏ –∞–Ω–∞–ª–æ–≥) —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ —É–∫–∞–∑–∞–Ω–∏–µ–º `exchange`, `symbol`, `tf`.
- **Metrics Engine**: –≤—ã—á–∏—Å–ª—è–µ—Ç EMA 20/50/100 –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (Angle, Velocity, Acceleration, Duration, Deviation, Separation, BarRange, ClosePosition) –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã N/M; —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –≤ –≤–∏—Ç—Ä–∏–Ω—ã `metrics_{tf}` (DuckDB/ClickHouse).
- **–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã**: —Å–µ—Ä–≤–∏—Å –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç–∞—Ä—à–∏–µ —Ç–∞–π–º—Ñ—Ä–µ–π–º—ã (1D, 4H, 1H), –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥–∏ `long_allowed`/`long_blocked` –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –∏—Ö –≤ Rule Engine. –ü—Ä–∏–º–µ—Ä—ã —É—Å–ª–æ–≤–∏–π: –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π `Angle_100` –Ω–∞ 1D —Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π `Duration`, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∏–≥–Ω–∞–ª–∞ —Å–ª–∞–±–æ—Å—Ç–∏ (EMA20 < EMA50) –Ω–∞ 4H.
- **Rule Engine**: –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —É—Å–ª–æ–≤–∏–π (JSON/YAML), –∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã —Å—Ç–∞—Ä—à–∏—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤, —Å–∏–≥–Ω–∞–ª—ã 1H (–∫–æ—Ä—Ä–µ–∫—Ü–∏—è –≤–æ–∑–ª–µ EMA50/EMA100) –∏ 5m-—Ç—Ä–∏–≥–≥–µ—Ä—ã (—Å—Ö–æ–∂–¥–µ–Ω–∏–µ EMA50/EMA100, —É—Å–∫–æ—Ä–µ–Ω–∏–µ EMA20). –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±—ç–∫—Ç–µ—Å—Ç—ã, paper trading –∏ —ç–∫—Å–ø–æ—Ä—Ç –ø—Ä–∞–≤–∏–ª.
- **Execution & Risk**: –º–æ–¥—É–ª—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ä–¥–µ—Ä–∞ –Ω–∞ –±–∏—Ä–∂–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π <1 —Å, –∞ Risk Engine —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π SL –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ 5m –∏ –ø–æ–ª–æ–∂–µ–Ω–∏–π EMA, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —Ä–∏—Å–∫ 1‚Äì2% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞ –∏ –≤–µ–¥—ë—Ç –∂—É—Ä–Ω–∞–ª —Å–¥–µ–ª–æ–∫, SL/TP, Trailing Stop.
- **Event Logger & Analytics**: —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏—è A/B —Å–æ snapshot –º–µ—Ç—Ä–∏–∫ –≤—Å–µ—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –¥–∞—Ç–∞—Å–µ—Ç—ã –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (—Å—Ä–µ–¥–Ω–∏–µ, œÉ, –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏, feature importance), –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∞—à–±–æ—Ä–¥—ã (Superset/Metabase) –∏ –Ω–æ—É—Ç–±—É–∫–∏ –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–µ–π.
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö**: —Å—ã—Ä—ã–µ —Å–≤–µ—á–∏ –∏ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ EMA —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `raw_store` –≤ —Ñ–æ—Ä–º–∞—Ç–µ Parquet (S3/MinIO), —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–ª–æ–Ω–Ω–æ—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –∏ –∫–æ–º–ø—Ä–µ—Å—Å–∏—é; –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–∏—Ç—Ä–∏–Ω—ã –º–µ—Ç—Ä–∏–∫ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –≤ ClickHouse –∏–ª–∏ TimescaleDB (PostgreSQL) —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏ `metrics_5m`, `metrics_1h`, `metrics_4h`, `metrics_1d`, –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–æ `symbol` –∏ `timestamp`.
- **Ingestion & –¥–æ—Å—Ç—É–ø**: –ø–æ—Ç–æ–∫–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä (Flink/Spark Streaming/Faust) –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —Å–≤–µ—á–µ–π –∏ –∑–∞–ø–∏—Å—å –º–µ—Ç—Ä–∏–∫ –≤ –ë–î; Rule Engine –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –Ω–∏–∑–∫–æ–ª–∞—Ç–µ–Ω—Ç–Ω–æ–º—É API, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–µ–º—É –¥–∞–Ω–Ω—ã–µ –ø–æ 5m –∏ —Å—Ç–∞—Ä—à–∏–º —Ñ–∏–ª—å—Ç—Ä–∞–º (1H/4H/1D) –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–∏.
- **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å**: Airflow/Prefect —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ—Å—á—ë—Ç–∞–º–∏, –ø–æ—Ç–æ–∫–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä (Flink/Faust) –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç 5m-–¥–∞–Ω–Ω—ã–µ, Kafka/Redpanda/Redis Streams –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–æ–ª—å –±—É—Ñ–µ—Ä–∞. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è Prometheus/Grafana –∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ª–æ–≥ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –∑–∞–¥–µ—Ä–∂–µ–∫ –∏ –æ—à–∏–±–æ–∫.

1. –û–±—â–∏–µ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –°—Ä–µ–¥–∞
–ü–∞—Ä–∞–º–µ—Ç—Ä	–û–ø–∏—Å–∞–Ω–∏–µ
–¶–µ–ª—å	–°–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –∏ —Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —á–∏—Å–ª–æ–≤—ã—Ö –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–µ–π –¥–∏–Ω–∞–º–∏–∫–∏ EMA –∏ –∏—Ö —É–¥–µ–ª—å–Ω–æ–≥–æ –≤–µ—Å–∞ –≤ —É—Å–ø–µ—à–Ω—ã—Ö —Å–¥–µ–ª–∫–∞—Ö.
–¢–∏–ø –°—Ç—Ä–∞—Ç–µ–≥–∏–∏	–¢–æ–ª—å–∫–æ –õ–û–ù–ì (–ü–æ–∫—É–ø–∫–∞) –Ω–∞ –°–ü–û–¢-—Ä—ã–Ω–∫–µ. –®–æ—Ä—Ç—ã, –º–∞—Ä–∂–∞ –∏ –ø–ª–µ—á–∏ –ò–°–ö–õ–Æ–ß–ï–ù–´.
–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã	EMA 20, EMA 50, EMA 100 (Exponential Moving Average).
–¢–∞–π–º—Ñ—Ä–µ–π–º	–î–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π 5m, 1H, 4H, 1D.

–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –¢–∞–±–ª–∏—Ü—ã

2. –ü–æ–ª–Ω—ã–π –°–ø–∏—Å–æ–∫ –ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ú–µ—Ç—Ä–∏–∫ (–ö–≤–∞–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –î–∏–Ω–∞–º–∏–∫–∏)
–°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–∞—Ä–∞/—Å–≤–µ—á–∏.

**–ö–ª—é—á–µ–≤–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–ª—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–≥–æ –Ω–∞–±–æ—Ä–∞ —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤ (–º–∏–Ω–∏–º—É–º 5m, 1H, 4H, 1D).

| –†–∞–∑–¥–µ–ª | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ |
| --- | --- |
| –†–∞—Å—á—ë—Ç | –ö–∞–∂–¥–∞—è –º–µ—Ç—Ä–∏–∫–∞ (Angle, Velocity, Acceleration, Duration, Deviation, Separation, BarRange, ClosePosition –∏ —Ç.–¥.) –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞. |
| –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ | –ó–Ω–∞—á–µ–Ω–∏—è N (–¥–ª—è —Ä–∞—Å—á—ë—Ç–æ–≤ —É–≥–ª–æ–≤/—Å–∫–æ—Ä–æ—Å—Ç–µ–π) –∏ M (–¥–ª—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏) –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –ø–æ–¥ —Ç–∞–π–º—Ñ—Ä–µ–π–º. –ü—Ä–∏–º–µ—Ä: `Duration` –Ω–∞ 4H ‚â• 6 —Å–≤–µ—á–µ–π, –Ω–∞ 5m ‚â• 12 —Å–≤–µ—á–µ–π. |

2.1. –ú–µ—Ç—Ä–∏–∫–∏ –î–∏–Ω–∞–º–∏–∫–∏ EMA (–¥–ª—è EMA 
20
‚Äã
 ,EMA 
50
‚Äã
 ,EMA 
100
‚Äã
 )
–£–≥–æ–ª / –ù–∞–∫–ª–æ–Ω (Angle): –ß–∏—Å–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞–∫–ª–æ–Ω–∞ –ª–∏–Ω–∏–∏ EMA –∑–∞ N –±–∞—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –ø—É–Ω–∫—Ç–∞—Ö/–ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö –Ω–∞ –±–∞—Ä). N –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞.

–°–∫–æ—Ä–æ—Å—Ç—å (Velocity): –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è EMA –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –±–∞—Ä–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞.

–£—Å–∫–æ—Ä–µ–Ω–∏–µ (Acceleration): –ò–∑–º–µ–Ω–µ–Ω–∏–µ –£–≥–ª–∞ EMA (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∑–∞–º–µ–¥–ª—è–µ—Ç—Å—è –∏–ª–∏ —É—Å–∫–æ—Ä—è–µ—Ç—Å—è –¥–≤–∏–∂–µ–Ω–∏–µ –ª–∏–Ω–∏–∏) –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ç–∞–π–º—Ñ—Ä–µ–π–º—É.

–î–ª–∏–Ω–∞ –õ–∏–Ω–∏–∏ (Duration): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞—Ä–æ–≤, –≤ —Ç–µ—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä—ã—Ö EMA 
X
‚Äã
  –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ –¥–≤–∏–∂–µ—Ç—Å—è –≤ –æ–¥–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ (—Ç–æ–ª—å–∫–æ –≤–≤–µ—Ä—Ö / —Ç–æ–ª—å–∫–æ –≤–Ω–∏–∑) –Ω–∞ –∑–∞–¥–∞–Ω–Ω–æ–º —Ç–∞–π–º—Ñ—Ä–µ–π–º–µ.

**–°—Ç–∞—Ä—Ç–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–∏–Ω–∞–º–∏–∫–∏ EMA:**

| –ú–µ—Ç—Ä–∏–∫–∞ | –§–æ—Ä–º—É–ª–∞ / –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ | –¢–∞–π–º—Ñ—Ä–µ–π–º | –ë–∞–∑–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- | --- | --- | --- |
| Angle | \((\text{EMA}_{X,\text{—Ç–µ–∫—É—â–∞—è}} - \text{EMA}_{X,\text{N –±–∞—Ä–æ–≤ –Ω–∞–∑–∞–¥}}) / N\) | 5m, 1H | \(N_\text{Angle} = 5\) | –û—Ü–µ–Ω–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –Ω–∞–∫–ª–æ–Ω–∞ –∏ —Å–∏–ª—ã –∏–º–ø—É–ª—å—Å–∞. |
| Angle | \((\text{EMA}_{X,\text{—Ç–µ–∫—É—â–∞—è}} - \text{EMA}_{X,\text{N –±–∞—Ä–æ–≤ –Ω–∞–∑–∞–¥}}) / N\) | 4H, 1D | \(N_\text{Angle} = 10\) | –§–∏–ª—å—Ç—Ä –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —Ç—Ä–µ–Ω–¥–∞. |
| Velocity | \(\text{EMA}_{X,\text{—Ç–µ–∫—É—â–∞—è}} - \text{EMA}_{X,\text{N –±–∞—Ä–æ–≤ –Ω–∞–∑–∞–¥}}\) | 5m, 1H | \(N_\text{Velocity} = 10\) | –ò–∑–º–µ—Ä–µ–Ω–∏–µ —É—Å–∫–æ—Ä–µ–Ω–∏—è / –∑–∞–º–µ–¥–ª–µ–Ω–∏—è –Ω–∞ —Ä–∞–±–æ—á–µ–º TF. |
| Velocity | \(\text{EMA}_{X,\text{—Ç–µ–∫—É—â–∞—è}} - \text{EMA}_{X,\text{N –±–∞—Ä–æ–≤ –Ω–∞–∑–∞–¥}}\) | 4H, 1D | \(N_\text{Velocity} = 20\) | –ö–æ–Ω—Ç—Ä–æ–ª—å —Å—Ä–µ–¥–Ω–µ- –∏ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è. |
| Duration | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –±–∞—Ä–æ–≤, –∫–æ–≥–¥–∞ \(\text{EMA}_X\) –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ —Ä–∞—Å—Ç—ë—Ç –∏–ª–∏ –ø–∞–¥–∞–µ—Ç | –≤—Å–µ | \(Min_\text{Bars} \ge 6\) | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –±–æ–∫–æ–≤–∏–∫–æ–≤; –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∏–º–ø—É–ª—å—Å–∞. |

2.2. –ú–µ—Ç—Ä–∏–∫–∏ –†–∞—Å—Å—Ç–æ—è–Ω–∏–π (Separation¬†&¬†Deviation)
–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¶–µ–Ω—ã –¥–æ EMA (Deviation): –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (%) –æ—Ç –¶–µ–Ω—ã –ó–∞–∫—Ä—ã—Ç–∏—è (Close) –¥–æ –∫–∞–∂–¥–æ–π –∏–∑ —Ç—Ä—ë—Ö EMA –Ω–∞ –∫–∞–∂–¥–æ–º —Ç–∞–π–º—Ñ—Ä–µ–π–º–µ.

Dev 
20
‚Äã
 =(Close‚àíEMA 
20
‚Äã
 )/EMA 
20
‚Äã
 √ó100
–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ú–µ–∂–¥—É EMA (Separation): –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (%) –º–µ–∂–¥—É –∫–∞–∂–¥–æ–π –ø–∞—Ä–æ–π EMA (EMA 
20
‚Äã
 ¬†vs¬†EMA 
50
‚Äã
 , EMA 
50
‚Äã
 ¬†vs¬†EMA 
100
‚Äã
 , –∏ —Ç.–¥.) –≤ —Ä–∞–º–∫–∞—Ö –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞.

–í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –†–∞—Å—Å—Ç–æ—è–Ω–∏–π: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ Separation –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ M –±–∞—Ä–æ–≤ –∫–∞–∂–¥–æ–≥–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞.

**–ë–∞–∑–æ–≤—ã–µ –ø–æ—Ä–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π:**

| –ú–µ—Ç—Ä–∏–∫–∞ | –§–æ—Ä–º—É–ª–∞ | –¢–∞–π–º—Ñ—Ä–µ–π–º | –ë–∞–∑–æ–≤—ã–π –ø–æ—Ä–æ–≥ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- | --- | --- | --- |
| Dev\(_X\) | \((\text{Close} - \text{EMA}_X)/\text{EMA}_X \times 100\) | 5m, 1H | \(|\text{Dev}_X| \ge 4\%\) | –°–∏–≥–Ω–∞–ª –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç–∏/–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ EMA. |
| Dev\(_X\) | \((\text{Close} - \text{EMA}_X)/\text{EMA}_X \times 100\) | 4H, 1D | \(|\text{Dev}_X| \ge 5\%\) | –ê–Ω–æ–º–∞–ª—å–Ω—ã–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –Ω–∞ —Å—Ç–∞—Ä—à–∏—Ö TF. |
| Sep\(_{XY}\) | \((\text{EMA}_X - \text{EMA}_Y)/\text{EMA}_Y \times 100\) | 5m, 1H | \(|\text{Sep}_{XY}| \ge 0.5\%\) | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–∞–∑ —Å—Ö–æ–∂–¥–µ–Ω–∏—è/—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è. |
| Sep\(_{XY}\) | \((\text{EMA}_X - \text{EMA}_Y)/\text{EMA}_Y \times 100\) | 4H, 1D | \(|\text{Sep}_{XY}| \ge 1.0\%\) | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–º–ø—É–ª—å—Å–∞ –Ω–∞ —Å—Ç–∞—Ä—à–∏—Ö TF. |

2.3. –ú–µ—Ç—Ä–∏–∫–∏ –¶–µ–Ω—ã/–ë–∞—Ä–∞ (–°–≤–µ—á–∏)
–î–ª–∏–Ω–∞ –°–≤–µ—á–∏ (BarRange): –ê–±—Å–æ–ª—é—Ç–Ω–æ–µ (–∏–ª–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ) —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É High –∏ Low —Ç–µ–∫—É—â–µ–π —Å–≤–µ—á–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —Ç–∞–π–º—Ñ—Ä–µ–π–º–µ.

–ü–æ–ª–æ–∂–µ–Ω–∏–µ –ó–∞–∫—Ä—ã—Ç–∏—è –≤ –°–≤–µ—á–µ (ClosePosition): –ü–æ–ª–æ–∂–µ–Ω–∏–µ Close –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ High‚àíLow (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç 0 –¥–æ 1, –≥–¥–µ 1 ‚Äî –∑–∞–∫—Ä—ã—Ç–∏–µ –Ω–∞ High) –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞.

3. –ë–ª–æ–∫ –°–±–æ—Ä–∞ –ó–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–µ–π –∏ –£–¥–µ–ª—å–Ω–æ–≥–æ –í–µ—Å–∞ (–ê–Ω–∞–ª–∏—Ç–∏–∫–∞) üí°
–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è) –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–µ–π.

3.1. –§–∏–∫—Å–∞—Ü–∏—è –∏ –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¢–æ—á–µ–∫ –°–æ–±—ã—Ç–∏–π
–°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –í–°–ï–• –º–µ—Ç—Ä–∏–∫ –∏–∑ –†–∞–∑–¥–µ–ª–∞ 2 (—Å–æ –≤—Å–µ–º–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º–∏ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞–º–∏) –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª (CSV/JSON) –∏–ª–∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤ –¥–≤—É—Ö –∫–ª—é—á–µ–≤—ã—Ö —Ç–æ—á–∫–∞—Ö:

–°–û–ë–´–¢–ò–ï –ê (–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –í—Ö–æ–¥ / –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ú–∏–Ω–∏–º—É–º): –¢–æ—á–∫–∞, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∫–∞–∫ –Ω–∞—á–∞–ª–æ –≤–æ—Å—Ö–æ–¥—è—â–µ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è.

–°–û–ë–´–¢–ò–ï –í (–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –í—ã—Ö–æ–¥ / –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ú–∞–∫—Å–∏–º—É–º): –¢–æ—á–∫–∞, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∫–∞–∫ –∫–æ–Ω–µ—Ü –≤–æ—Å—Ö–æ–¥—è—â–µ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏).

3.2. –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ê–Ω–∞–ª–∏–∑ –∏ –†–∞—Å—á–µ—Ç –£–¥–µ–ª—å–Ω–æ–≥–æ –í–µ—Å–∞
–°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –°–¥–µ–ª–æ–∫: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–º–µ—Ç–∏—Ç—å –∫–∞–∂–¥—É—é –ø–∞—Ä—É (–°–æ–±—ã—Ç–∏–µ –ê ‚Üí –°–æ–±—ã—Ç–∏–µ –í) –∫–∞–∫ –£—Å–ø–µ—à–Ω–∞—è/–ù–µ—É—Å–ø–µ—à–Ω–∞—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Ä–æ–≥–∞ –ø—Ä–∏–±—ã–ª–∏.

**–ü–æ—Ä–æ–≥ —É—Å–ø–µ—Ö–∞ –∏ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
| --- | --- | --- | --- |
| –ü–æ—Ä–æ–≥ —É—Å–ø–µ—Ö–∞ —Å–¥–µ–ª–∫–∏ | `Min_Profit_X` | ‚â• 2.5% | –°–¥–µ–ª–∫–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ–π, –µ—Å–ª–∏ –ø—Ä–∏–±—ã–ª—å –¥–æ—Å—Ç–∏–≥–∞–µ—Ç 2.5% –∏ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —à—É–º. |
| –ù–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞ | `Neutral_Range` | ¬±0.5% | –°–¥–µ–ª–∫–∏ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤–Ω—É—Ç—Ä–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ ¬±0.5% –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è –∏–∑ —Ä–∞—Å—á—ë—Ç–∞ —É–¥–µ–ª—å–Ω–æ–≥–æ –≤–µ—Å–∞ –∫–∞–∫ –Ω–µ–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ. |

–í—ã—è–≤–ª–µ–Ω–∏–µ –ó–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–µ–π (–°—Ä–µ–¥–Ω–∏–µ –ó–Ω–∞—á–µ–Ω–∏—è): –†–∞—Å—á–µ—Ç –°—Ä–µ–¥–Ω–µ–≥–æ –ó–Ω–∞—á–µ–Ω–∏—è –∏ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –û—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–π –º–µ—Ç—Ä–∏–∫–∏, –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤ –°–æ–±—ã—Ç–∏–∏ –ê (–¢–æ—á–∫–∞ –í—Ö–æ–¥–∞), –Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –£–°–ü–ï–®–ù–´–• —Å–¥–µ–ª–æ–∫.

–†–∞—Å—á–µ—Ç –£–¥–µ–ª—å–Ω–æ–≥–æ –í–µ—Å–∞ (–ó–Ω–∞—á–∏–º–æ—Å—Ç–∏): –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–µ—Ç–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è –∏–ª–∏ Feature Importance) –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Ç–æ–≥–æ, –Ω–∞—Å–∫–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–º –±—ã–ª–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∂–¥–æ–π –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ–≥–æ –∏—Å—Ö–æ–¥–∞.

3.3. –°—Ö–µ–º—ã –•—Ä–∞–Ω–µ–Ω–∏—è –°–æ–±—ã—Ç–∏–π –∏ –ú–µ—Ç—Ä–∏–∫
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ–±—ã—Ç–∏–π:** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –°–û–ë–´–¢–ò–Ø A (–≤—Ö–æ–¥) –∏ –°–û–ë–´–¢–ò–Ø B (–≤—ã—Ö–æ–¥) —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–ª–Ω—ã–π —Å–Ω–∏–º–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä—ã–Ω–∫–∞.

| –ü–æ–ª–µ | –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –û–ø–∏—Å–∞–Ω–∏–µ |
| --- | --- | --- |
| `event_id` | UUID | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–æ–±—ã—Ç–∏—è. |
| `trade_id` | UUID | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–¥–µ–ª–∫–∏ (—Å–≤—è–∑—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è A –∏ B). |
| `event_type` | ENUM (`ENTRY`/`EXIT`) | –¢–∏–ø —Å–æ–±—ã—Ç–∏—è. |
| `timestamp` | TIMESTAMP | –ú–µ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —Ñ–∏–∫—Å–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏—è. |
| `symbol` | TEXT | –¢–æ—Ä–≥–æ–≤–∞—è –ø–∞—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, BTC/USDT). |
| `price` | NUMERIC | –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞ –∏–ª–∏ –≤—ã—Ö–æ–¥–∞. |
| `is_successful` | BOOLEAN | –î–ª—è —Å–æ–±—ã—Ç–∏—è B ‚Äî —Ñ–∞–∫—Ç —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ —Å–¥–µ–ª–∫–∏. |
| `profit_pct` | NUMERIC | –ò—Ç–æ–≥–æ–≤–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å —Å–¥–µ–ª–∫–∏ (–¥–ª—è B). |
| `metrics_snapshot` | JSONB | –í–ª–æ–∂–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –ø–æ –≤—Å–µ–º —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞–º. |

- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ `metrics_snapshot`:** –º–µ—Ç—Ä–∏–∫–∏ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞–º –¥–ª—è –æ–±–ª–µ–≥—á–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ ¬´—É–¥–µ–ª—å–Ω–æ–≥–æ –≤–µ—Å–∞¬ª.

```json
{
  "tf_5m": {
    "angle_20": 0.015,
    "duration_50": 8,
    "dev_20": -0.8,
    "bar_range": 0.0005
  },
  "tf_1h": {
    "angle_100": 0.12,
    "separation_50_100": 1.2
  },
  "tf_4h": {
    "sep_50_20": 0.7,
    "duration_100": 9
  },
  "tf_1d": {
    "angle_100": 0.06,
    "duration_100": 18
  }
}
```

–î–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —Ö—Ä–∞–Ω–µ–Ω–∏–µ ¬´—Å—ã—Ä–æ–π¬ª –∏—Å—Ç–æ—Ä–∏–∏ –º–µ—Ç—Ä–∏–∫ –≤ Parquet/CSV –¥–ª—è –æ—Ñ–ª–∞–π–Ω-–∞–Ω–∞–ª–∏–∑–∞; `metrics_snapshot` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å—Å—ã–ª–æ—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –∑–Ω–∞—á–µ–Ω–∏—è–º –Ω–∞ –º–æ–º–µ–Ω—Ç —Å–æ–±—ã—Ç–∏—è.

3.4. –î–∏–∞–ø–∞–∑–æ–Ω—ã –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ü–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–ë—ç–∫—Ç–µ—Å—Ç)
–î–ª—è –ø–æ–∏—Å–∫–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–µ–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –¥–æ–ª–∂–µ–Ω –≤–∞—Ä—å–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –°—Ç–∞—Ä—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –î–∏–∞–ø–∞–∑–æ–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- | --- | --- |
| –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ SL `k_range` | 2.5 | [1.5; 4.0] | –ë–∞–ª–∞–Ω—Å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å—Ç–æ–ø–∞ –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∫ —à—É–º—É. |
| –ü–æ—Ä–æ–≥ `Angle_100,1D` | ‚â• 0.05% –Ω–∞ –±–∞—Ä | [0.02%; 0.15%] –Ω–∞ –±–∞—Ä | –ü–æ–¥–±–æ—Ä —Ñ–∏–ª—å—Ç—Ä–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–µ–Ω–¥–∞. |
| –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è `Duration_100,1D` | ‚â• 15 –±–∞—Ä–æ–≤ | [10; 30] –±–∞—Ä–æ–≤ | –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–ª–∏–Ω—ã —É—Å—Ç–æ–π—á–∏–≤–æ–π —Ñ–∞–∑—ã —Ç—Ä–µ–Ω–¥–∞. |
| –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è `Sep_{50-20,4H}` | ‚â• 0.5% | [0.2%; 1.0%] | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫ –∏–º–ø—É–ª—å—Å—É –Ω–∞ 4H. |

4. –ë–ª–æ–∫ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –¢–æ—Ä–≥–æ–≤–ª–∏ (–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ)
4.1. –õ–æ–≥–∏–∫–∞ –í—Ö–æ–¥–∞ (Rule Engine)
- –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–∑–≤–æ–ª—è—Ç—å –∑–∞–¥–∞–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ª—é–±–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫ –∏ —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤, –≤–∫–ª—é—á–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –∏–∑ –†–∞–∑–¥–µ–ª–∞ 3.
- –í—Ö–æ–¥ (–õ–û–ù–ì) —Ä–∞–∑—Ä–µ—à—ë–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ç—Ä—ë—Ö —É—Ä–æ–≤–Ω–µ–π —É—Å–ª–æ–≤–∏–π:
  1. **–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä (1D / 4H / 1H):** –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –≤–æ—Å—Ö–æ–¥—è—â–∏–π —É–∫–ª–æ–Ω –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–º–ø—É–ª—å—Å–∞ –Ω–∞ —Å—Ç–∞—Ä—à–∏—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞—Ö ‚Äî `Angle_100,1D ‚â• 0.05%` –Ω–∞ –±–∞—Ä, `Duration_100,1D ‚â• 15` –±–∞—Ä–æ–≤, `EMA20,4H > EMA50,4H` –∏ `Sep_{50-20,4H} ‚â• 0.5%`.
  2. **–£—Å–ª–æ–≤–∏–µ 1H (–∫–æ—Ä—Ä–µ–∫—Ü–∏—è):** —Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –º–µ–∂–¥—É EMA50 –∏ EMA100 –Ω–∞ 1H, –∞ –Ω–∏—Å—Ö–æ–¥—è—â–∞—è `Duration_20,1H` (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥—Ä—è–¥ —Å–Ω–∏–∂–∞—é—â–∏—Ö—Å—è –±–∞—Ä–æ–≤ EMA20) ‚â• 5 ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏.
  3. **–¢—Ä–∏–≥–≥–µ—Ä –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è (5m):** `Sep_{50-20,5m} ‚â§ 0.1%`, `Velocity_{20,5m} > 0`, `BarRange_{5m} ‚â§ ATR_{20,5m}` ‚Äî —Å–∏–≥–Ω–∞–ª —Ç–æ—á–Ω–æ–≥–æ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ –Ω–∞ –º–ª–∞–¥—à–µ–º TF.
- **–°—Ç–∞—Ä—Ç–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤:**

| –¢–∞–π–º—Ñ—Ä–µ–π–º | –£—Å–ª–æ–≤–∏–µ | –ü–æ—Ä–æ–≥ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- | --- | --- |
| 1D | `Angle_100` | ‚â• 0.05% –Ω–∞ –±–∞—Ä | –£–≤–µ—Ä–µ–Ω–Ω—ã–π –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π —Ç—Ä–µ–Ω–¥. |
| 1D | `Duration_100` | ‚â• 15 –±–∞—Ä–æ–≤ | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ —Ç—Ä–µ–Ω–¥–∞. |
| 4H | `EMA20 > EMA50` | TRUE | –ë—ã—á–∏–π –ø–æ—Ä—è–¥–æ–∫ —Å—Ä–µ–¥–Ω–∏—Ö. |
| 4H | `Sep_{50-20}` | ‚â• 0.5% | –ù–∞–ª–∏—á–∏–µ –∏–º–ø—É–ª—å—Å–∞/—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è. |
| 1H | –¶–µ–Ω–∞ | –í –¥–∏–∞–ø–∞–∑–æ–Ω–µ EMA50‚ÄìEMA100 | –í—Ö–æ–¥ –∏–∑ –∑–æ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏. |
| 1H | `Duration_20` (–Ω–∏—Å—Ö.) | ‚â• 5 –±–∞—Ä–æ–≤ | –î–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ –æ—Ç–∫–∞—Ç–∞. |

- **–°—Ç–∞—Ä—Ç–æ–≤—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è (5m):**

| –£—Å–ª–æ–≤–∏–µ | –ü–æ—Ä–æ–≥ | –û–ø–∏—Å–∞–Ω–∏–µ |
| --- | --- | --- |
| `Sep_{50-20,5m}` | ‚â§ 0.1% | EMA50 –∏ EMA20 –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Å—Ö–æ–¥—è—Ç—Å—è. |
| `Velocity_{20,5m}` | > 0 | EMA20 —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤–≤–µ—Ä—Ö. |
| `BarRange_{5m}` | ‚â§ `ATR_{20,5m}` | –í—Ö–æ–¥ –Ω–∞ —Å–≤–µ—á–µ —Å –Ω–∏–∑–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å—é. |

- **–ë–∞–∑–æ–≤—ã–µ —É—Å–ª–æ–≤–∏—è –≤—ã—Ö–æ–¥–∞:** –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç `TP_min = 3%` –æ—Ç —Ü–µ–Ω—ã –≤—Ö–æ–¥–∞; —Å–∏–≥–Ω–∞–ª –Ω–∞ —Ñ–∏–∫—Å–∞—Ü–∏—é –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ `Velocity_{20,5m} < 0` –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è `TP_min` –∏–ª–∏ –ø—Ä–∏ –∞–Ω–æ–º–∞–ª—å–Ω–æ–º –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ `Dev_{20,5m} ‚â• 4%`. –î–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —á–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –∏ –∑–∞–ø—É—Å–∫ —Ç—Ä–µ–π–ª–∏–Ω–≥-—Å—Ç–æ–ø–∞ (—Å–º. 4.2).

4.2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –†–∏—Å–∫–∞–º–∏ (Risk Engine)
- –†–∏—Å–∫ –ø–æ –¥–µ–ø–æ–∑–∏—Ç—É –Ω–∞ –æ–¥–Ω—É —Å–¥–µ–ª–∫—É –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å –∑–∞–¥–∞–Ω–Ω—ã–π –º–∞–∫—Å–∏–º—É–º.
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å—Ç–æ–ø-–ª–æ—Å—Å (SL):** —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ `SL_price = entry_price ‚àí k_range √ó BarRange_5m`, –≥–¥–µ –±–∞–∑–æ–≤—ã–π `k_range = 2.5`.
- **–ó–∞—â–∏—Ç–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:** `SL_price ‚â• EMA_{100,5m}` –∏ `SL_price ‚â• EMA_{100,1H}`; –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π –≤—Ö–æ–¥ –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è.
- **–†–∞—Å—á—ë—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏:** `Risk_amount = Deposit √ó Max_Risk`, `Risk_unit = entry_price ‚àí SL_price`, `Position_size = Risk_amount / Risk_unit`.
- **–¢—Ä–µ–π–ª–∏–Ω–≥-—Å—Ç–æ–ø:** –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è `TP_min` –∏ —Å–ª–µ–¥—É–µ—Ç –ª–∏–±–æ –∑–∞ `EMA_{20,5m}`, –ª–∏–±–æ –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ `W = 1.0 √ó ATR_{20,5m}` –æ—Ç —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã (–º–∏–Ω–∏–º—É–º).

**–°—Ç–∞—Ä—Ç–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞ –∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ | –¢–∞–π–º—Ñ—Ä–µ–π–º | –ó–Ω–∞—á–µ–Ω–∏–µ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- | --- | --- | --- |
| –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫ | `Max_Risk` | - | 1.5% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞ | –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ª–∏–º–∏—Ç –Ω–∞ —Å–¥–µ–ª–∫—É. |
| –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç SL | `k_range` | 5m | 2.5 | –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Å—Ç–æ–ø–∞. |
| –ó–∞—â–∏—Ç–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä | - | 1H | `SL ‚â• EMA_{100,1H}` | –°—Ç–æ–ø –Ω–µ –Ω–∏–∂–µ –∫–ª—é—á–µ–≤–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏. |
| –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π TP | `TP_min` | - | 3.0% | –¶–µ–ª–µ–≤–∞—è –ø—Ä–∏–±—ã–ª—å –¥–ª—è —Ñ–∏–∫—Å–∞—Ü–∏–∏. |
| –¢—Ä–µ–π–ª–∏–Ω–≥-—Å—Ç–æ–ø | `W` | 5m | `1.0 √ó ATR_{20,5m}` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–æ–ø–∞ –ø–æ—Å–ª–µ `TP_min`. |
